/*! (C) Copyright 2020 LanguageTooler GmbH. All rights reserved. */
!function(){var e;const t=document.getElementById("banner"),n=document.getElementById("login"),o=document.getElementById("login-options"),a=document.getElementById("logout-button"),s=document.getElementById("manage-account-button"),i=document.getElementById("login-popup-button"),l=document.getElementById("lt-options__package-badge-container"),d=document.getElementById("managed-login"),c=document.getElementById("managed-login-options"),r=document.getElementById("managed-login-button"),g=document.getElementById("managed-logout-button"),u=document.getElementById("lt-options-discount"),m=document.getElementById("toggleSynonymsSwitch"),p=document.getElementById("togglePickyModeSwitch"),y=document.getElementById("openCardHotkey"),E=document.getElementById("personalDictionary"),h=document.getElementById("personalDictionary-options"),f=document.getElementById("personalDictionaryList"),v=document.getElementById("personalDictionaryInput"),b=document.getElementById("addToPersonalDictionary"),k=document.getElementById("personalDictionary-options__clearAll"),L=document.getElementById("personalDictionary-options__copy"),S=document.getElementById("ignoredRules"),_=document.getElementById("ignoredRules-options"),I=document.getElementById("ignoredRulesList"),D=document.getElementById("ignoredRules-options__clearAll"),C=document.getElementById("disabledDomains"),B=document.getElementById("disabledDomains-options"),M=document.getElementById("disabledDomainsList"),A=document.getElementById("disabledDomainsInput"),w=document.getElementById("addToDisabledDomains"),T=document.getElementById("disabledDomains-options__clearAll"),x=document.getElementById("language"),O=document.getElementById("language-options"),R=document.getElementById("preferred-languages-count"),N=document.getElementById("preferred-languages"),U=document.getElementById("new-preferred-languages"),P=document.getElementById("experimental"),V=document.getElementById("experimental-options"),H=document.getElementById("serverUrl"),G=document.getElementById("serverUrlFieldset"),q=document.getElementById("serverUrl-disabled"),$=document.getElementById("serverType-cloud"),F=document.getElementById("serverType-local"),Y=document.getElementById("serverType-custom"),W=document.getElementById("localServerAvailabilityWarning"),j=document.getElementById("retryLocalServer"),z=document.getElementById("customServerUrl"),J=document.getElementById("motherTongue"),K=document.getElementById("variant-en"),Q=document.getElementById("variant-de"),X=document.getElementById("variant-pt"),Z=document.getElementById("variant-ca"),ee=document.getElementById("autoCheckAllDomains"),te=document.getElementById("autoCheckDomains-options"),ne=document.getElementById("autoCheckDomains"),oe=document.getElementById("autoCheckDomainInput"),ae=document.getElementById("addToAutoCheckDomains"),se=document.getElementById("autoCheckDomains-options__clearAll"),ie=document.getElementById("ignoredDomains-options"),le=document.getElementById("ignoredDomains"),de=document.getElementById("ignoredDomainInput"),ce=document.getElementById("addToIgnoredDomains"),re=document.getElementById("ignoredDomains-options__clearAll"),ge=document.getElementById("copyright-link"),ue=document.getElementById("synonyms-toggle-wrapper"),me=document.getElementById("current-year"),pe=document.querySelectorAll("[data-lt-nice-select]"),ye=/^(https?:\/\/)?localhost(:[0-9]{1,5})?(\/.*)?$/i,Ee=/^(https?:\/\/)?[a-z0-9]+([-.]{1}[a-z0-9]+)*\.[a-z]{2,15}(:[0-9]{1,5})?(\/.*)?$/i,he=/^(?:https?:\/\/)?(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}(?::[0-9]{1,5})?$/,fe=StorageController.create();function ve(e){return ye.test(e)||Ee.test(e)||he.test(e)}function be(){const{hasPaidSubscription:e}=fe.getUIState();document.body.classList.toggle("lt-options--plus",e),l.innerHTML="",new PackageBadge(null,e?"premium":"basic","default",l),function(){const{username:e,token:t,password:n}=fe.getSettings(),o=document.getElementById("lt-login"),a=document.getElementById("lt-account");e&&(n||t)?(o.style.display="none",a.style.display="block",q.style.display="block",G.setAttribute("disabled",""),translateElement("#account-text",{key:"settingsLoggedInAs",isHTML:!0,interpolations:[`<strong>${e}</strong>`]})):(o.style.display="block",a.style.display="none",q.style.display="none",G.removeAttribute("disabled"))}(),ke()}function ke(){const{apiServerUrl:e,disablePersonalDictionary:a,disableIgnoredRules:i,loginUrl:l}=fe.getManagedSettings(),{username:r,token:g,password:u}=fe.getSettings();a&&(E.style.display="none",h.style.display="none"),i&&(S.style.display="none",_.style.display="none"),e&&(H.style.display="none",t.style.display="none"),l&&(t.style.display="none",n.style.display="none",o.style.display="none",s.style.display="none",d.style.display="",c.style.display="");const m=document.getElementById("managed-login-box"),p=document.getElementById("managed-logout-box");r&&(u||g)?(m.style.display="none",p.style.display="block",translateElement("#managed-account-text",{key:"settingsLoggedInAs",isHTML:!0,interpolations:[`<strong>${r}</strong>`]})):(m.style.display="block",p.style.display="none")}function Le(e){if(!(e.target instanceof HTMLButtonElement))return;const t=e.target.closest("[data-preferred-language]");if(!t||"string"!=typeof t.dataset.preferredLanguage)return;const{preferredLanguages:n}=fe.getSettings(),o=n.indexOf(t.dataset.preferredLanguage);-1!==o&&(fe.updateSettings({preferredLanguages:n.slice(0,o).concat(n.slice(o+1))}),_e())}function Se(e){if(!(e.target instanceof HTMLSelectElement))return;const{preferredLanguages:t}=fe.getSettings();fe.updateSettings({preferredLanguages:uniq(t.concat([e.target.value]))}),_e()}function _e(){const{preferredLanguages:e}=fe.getSettings(),t=Array.from(document.querySelectorAll("[data-preferred-language]")),n=Array.from(U.querySelectorAll("optgroup"));t.concat(n).forEach((e=>{e.remove()})),e.forEach((e=>{const t=LanguageManager.ALL_LANGUAGES.find((({code:t})=>t===e));if(!t)return;const n=Object.assign(document.createElement("span"),{textContent:t.name,className:"lt-pill-box__item__text"}),o=Object.assign(document.createElement("button"),{className:"lt-pill-box__item__delete lt-icon lt-icon__close_small",type:"button"}),a=Object.assign(document.createElement("div"),{className:"lt-pill-box__item lt-pill-box__item--option"});a.dataset.preferredLanguage=e,a.appendChild(n),a.appendChild(o),N.insertBefore(a,U.parentNode)}));const o=document.createElement("optgroup"),a=document.createElement("optgroup");LanguageManager.ALL_LANGUAGES.forEach((t=>{if(e.includes(t.code))return;const n=Object.assign(document.createElement("option"),{value:t.code,textContent:t.name});LanguageManager.POPULAR_LANGUAGES.includes(t.code)&&o.appendChild(n.cloneNode(!0)),a.appendChild(n)})),o.setAttribute("data-t-attr",JSON.stringify(["label","settingsPreferredLanguagesPopularList"])),a.setAttribute("data-t-attr",JSON.stringify(["label","settingsPreferredLanguagesCompleteList"])),U.appendChild(o),U.appendChild(a),R.textContent=e.length?`(${e.length})`:"",translateSection(U)}function Ie(e,t){e.value=t,e.dispatchEvent(new Event("change",{bubbles:!0}))}function De(){fe&&(m.classList.add("lt-toggle--checked"),fe.updateSettings({hasSynonymsEnabled:!0}))}function Ce(){fe&&(m.classList.remove("lt-toggle--checked"),fe.updateSettings({hasSynonymsEnabled:!1}))}function Be(){fe&&(p.classList.add("lt-toggle--checked"),fe.updateSettings({hasPickyModeEnabledGlobally:!0}))}function Me(){fe&&(p.classList.remove("lt-toggle--checked"),fe.updateSettings({hasPickyModeEnabledGlobally:!1}))}function Ae(e=Dictionary.getSorted(),t=0===Dictionary.get().length){f.innerHTML="";for(const t of e){const e=document.createElement("li");e.className="lt-personal-dictionary__item";const n=document.createElement("span");n.className="lt-personal-dictionary__title",n.textContent=t,e.appendChild(n);const o=document.createElement("span");o.className="lt-personal-dictionary__delete-button",o.dataset.word=t,o.addEventListener("click",xe),e.appendChild(o),f.appendChild(e)}const n=document.getElementById("personalDictionary-optionsInside"),o=document.getElementById("personalDictionary-options__emptyState"),a=document.getElementById("personalDictionary-options__emptySearch");e.length>0?(n.style.display="block",o.style.display="none",a.style.display="none"):t?(n.style.display="none",o.style.display="block",a.style.display="none"):(n.style.display="none",o.style.display="none",a.style.display="block")}function we(){const e=v.value;b.disabled=""===e.trim();const t=Dictionary.getSorted(),n=[];for(const o of t)o.includes(e)&&n.push(o);Ae(n,0===t.length)}function Te(){const e=v.value.trim();e&&(Dictionary.add(e).then((()=>Ae())),v.value="",b.disabled=!0)}function xe(e){const t=e.currentTarget.dataset.word;t&&Dictionary.remove(t).then(we)}function Oe(){I.innerHTML="";const e=fe.getSettings().ignoredRules,t=i18nManager.getMessage("enableRuleTooltip");for(const n of e){if(n.language){const e=LanguageManager.getUserLanguageCodes().some((e=>n.language.toLowerCase().startsWith(e)||"*"===n.language));if(StorageControllerClass.getDefaultSettings().ignoredRules.some((e=>e.id===n.id))&&!e)continue}const e=document.createElement("li");e.className="lt-options__rules__item";const o=document.createElement("span");o.className="lt-options__rules__title",o.textContent="- "+(n.description||n.id),e.appendChild(o);const a=document.createElement("span");a.className="lt-options__rules__enable-button",a.setAttribute("title",t),a.dataset.ruleId=n.id,a.textContent=t,a.addEventListener("click",Re),e.appendChild(a),I.appendChild(e)}const n=document.getElementById("ignoredRules-optionsInside"),o=document.getElementById("ignoredRules-options__emptyState");e.length>0?(n.style.display="block",o.style.display="none"):(n.style.display="none",o.style.display="block")}function Re(e){const t=e.currentTarget.dataset.ruleId;if(t){const e=fe.getSettings().ignoredRules.filter((e=>e.id!==t));fe.updateSettings({ignoredRules:e}).then(Oe)}}function Ne(e=fe.getSettings().disabledDomains,t=fe.getSettings().disabledDomains.length>0){M.innerHTML="";const n=i18nManager.getMessage("settingsEnableDomain");for(const t of e){const e=document.createElement("li");e.className="lt-options__rules__item";const o=document.createElement("span");o.className="lt-options__rules__title",o.textContent="● "+t,e.appendChild(o);const a=document.createElement("span");a.className="lt-options__rules__enable-button",a.setAttribute("title",n),a.dataset.domain=t,a.textContent=n,a.addEventListener("click",Ve),e.appendChild(a),M.appendChild(e)}const o=document.getElementById("disabledDomains-optionsInside"),a=document.getElementById("disabledDomains-options__emptyState"),s=document.getElementById("disabledDomains-options__emptySearch");e.length>0?(o.style.display="block",a.style.display="none",s.style.display="none"):t?(o.style.display="none",a.style.display="block",s.style.display="none"):(o.style.display="none",a.style.display="none",s.style.display="block")}function Ue(){const e=A.value;w.disabled=""===e.trim();const t=fe.getSettings().disabledDomains.sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),n=[];for(const o of t)o.includes(e)&&n.push(o);Ne(n,0===t.length)}function Pe(){const e=A.value.trim(),t=getDomain(e,"");if(""===t.trim()||!ve(e))return void alert(i18nManager.getMessage("settingsDomainInvalid"));A.value="",w.disabled=!0;const n=fe.getSettings().disabledDomains;n.includes(t)?Ne(n,!1):(n.push(t),fe.updateSettings({disabledDomains:n}).then((()=>Ne(n,!1))))}function Ve(e){const t=e.currentTarget.dataset.domain;if(t){const e=fe.getSettings().disabledDomains.filter((e=>e!==t));fe.updateSettings({disabledDomains:e}).then(Ue)}}function He(){Ge(Y.checked),F.checked?qe():W.style.display="none"}function Ge(e=!1){z.style.display=e?"block":"none",z.required=e,e?z.value=z.dataset.prevValue||"":(z.dataset.prevValue=z.value,z.value="")}function qe(){fetch(config.LOCAL_SERVER_URL+"/languages",{method:"GET",mode:"cors"}).then((()=>{W.style.display="none"})).catch((()=>{W.style.display="block"}))}function $e(e=!1){te.style.display=e?"none":"",ie.style.display=e?"":"none"}function Fe(e=fe.getSettings().autoCheckOnDomains,t=0===fe.getSettings().autoCheckOnDomains.length){ne.innerHTML="";const n=i18nManager.getMessage("settingsDeleteAutoCheckDomain");for(const t of e){const e=document.createElement("li");e.className="lt-options__rules__item";const o=document.createElement("span");o.className="lt-options__rules__title",o.textContent="● "+t,e.appendChild(o);const a=document.createElement("span");a.className="lt-options__rules__enable-button",a.setAttribute("title",n),a.dataset.domain=t,a.textContent=n,a.addEventListener("click",je),e.appendChild(a),ne.appendChild(e)}const o=document.getElementById("autoCheckDomains-optionsInside"),a=document.getElementById("autoCheckDomains-options__emptyState"),s=document.getElementById("autoCheckDomains-options__emptySearch");e.length>0?(o.style.display="block",a.style.display="none",s.style.display="none"):t?(o.style.display="none",a.style.display="block",s.style.display="none"):(o.style.display="none",a.style.display="none",s.style.display="block")}function Ye(){const e=oe.value;ae.disabled=""===e.trim();const t=fe.getSettings().autoCheckOnDomains.sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),n=[];for(const o of t)o.includes(e)&&n.push(o);Fe(n,0===t.length)}function We(){const e=oe.value.trim(),t=getDomain(e,"");if(""===t.trim()||!ve(e))return void alert(i18nManager.getMessage("settingsDomainInvalid"));oe.value="",ae.disabled=!0;const n=fe.getSettings().autoCheckOnDomains;n.includes(t)?Fe(n,!1):(n.push(t),fe.updateSettings({autoCheckOnDomains:n}).then((()=>Fe(n,!1))))}function je(e){const t=e.currentTarget.dataset.domain;if(t){const e=fe.getSettings().autoCheckOnDomains.filter((e=>e!==t));fe.updateSettings({autoCheckOnDomains:e}).then((()=>Fe(e,0===e.length)))}}function ze(e=fe.getSettings().ignoreCheckOnDomains,t=0===fe.getSettings().ignoreCheckOnDomains.length){le.innerHTML="";const n=i18nManager.getMessage("settingsDeleteIgnoredDomain");for(const t of e){const e=document.createElement("li");e.className="lt-options__rules__item";const o=document.createElement("span");o.className="lt-options__rules__title",o.textContent="● "+t,e.appendChild(o);const a=document.createElement("span");a.className="lt-options__rules__enable-button",a.setAttribute("title",n),a.dataset.domain=t,a.textContent=n,a.addEventListener("click",Qe),e.appendChild(a),le.appendChild(e)}const o=document.getElementById("ignoredDomains-optionsInside"),a=document.getElementById("ignoredDomains-options__emptyState"),s=document.getElementById("ignoredDomains-options__emptySearch");e.length>0?(o.style.display="block",a.style.display="none",s.style.display="none"):t?(o.style.display="none",a.style.display="block",s.style.display="none"):(o.style.display="none",a.style.display="none",s.style.display="block")}function Je(){const e=de.value;ce.disabled=""===e.trim();const t=fe.getSettings().ignoreCheckOnDomains.sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),n=[];for(const o of t)o.includes(e)&&n.push(o);ze(n,0===t.length)}function Ke(){const e=de.value.trim(),t=getDomain(e);if(""===t.trim()||!ve(e))return void alert(i18nManager.getMessage("settingsDomainInvalid"));de.value="",ce.disabled=!0;const n=fe.getSettings().ignoreCheckOnDomains;n.includes(t)?ze(n,!1):(n.push(t),fe.updateSettings({ignoreCheckOnDomains:n}).then((()=>ze(n,!1))))}function Qe(e){const t=e.currentTarget.dataset.domain;if(t){const e=fe.getSettings().ignoreCheckOnDomains.filter((e=>e!==t));fe.updateSettings({ignoreCheckOnDomains:e}).then((()=>ze(e,0===e.length)))}}translateSection(document.documentElement),document.documentElement.lang=navigator.language,BrowserDetector.isSafari()?document.getElementById("haveAccountDesc").style.display="none":document.getElementById("haveAccountDesc").innerHTML=i18nManager.getMessage("haveAccountDesc")+" <a target='_blank' href='https://languagetool.org'>LanguageTool.org</a>",document.getElementById("privacyPolicy").innerHTML="<a target='_blank' href='https://languagetool.org/privacy/'>"+i18nManager.getMessage("privacyPolicy")+"</a>",Array.from(document.querySelectorAll("[data-premium-link]")).forEach((e=>{e.addEventListener("click",(e=>{browser.runtime.sendMessage({command:"OPEN_PREMIUM_PAGE",campaign:"addon2-options"}),e.preventDefault()}))}));const Xe=location.hash.replace(/\?.*$/,""),Ze=document.querySelector(Xe||"#login");Ze&&Ze.nextElementSibling&&Ze.nextElementSibling.classList.contains("lt-toggle-box")&&(Ze.classList.add("lt-options-toggle--visible"),Ze.nextElementSibling.classList.add("lt-toggle-box--visible"),Xe&&document.documentElement.scrollTo(0,Ze.offsetTop-75));let et;LanguageManager.getUserLanguageCodes().some((e=>e.startsWith("de")||e.startsWith("fr")||e.startsWith("nl")))&&(document.getElementById("made-in-potsdam").style.display="inline"),fe.onReady((function(){be(),Ae(),Oe(),Ne(),ke(),Array.from(pe).forEach((e=>{const t=e.querySelector("select");null==t||t.addEventListener("change",(()=>{const n=e.querySelector("span")||document.createElement("span"),o=Array.from(t.children).filter((e=>e instanceof HTMLOptionElement)).find((e=>e.value===t.value));n.parentNode&&n.parentNode.removeChild(n),n.textContent=(null==o?void 0:o.textContent)||"",e.insertBefore(n,t),e.dataset.ltNiceSelect=t.value}))})),N.addEventListener("click",Le),U.addEventListener("change",Se),_e();const e=fe.getSettings();e.apiServerUrl===config.MAIN_SERVER_URL?($.checked=!0,ue.style.display=""):e.apiServerUrl===config.LOCAL_SERVER_URL?(F.checked=!0,ue.style.display="none"):(Ge(!0),Y.checked=!0,z.value=e.apiServerUrl,ue.style.display="none"),Ie(y,e.openCardHotkey),Ie(J,e.motherTongue),Ie(K,e.enVariant),Ie(Q,e.deVariant),Ie(X,e.ptVariant),Ie(Z,e.caVariant),ee.checked=e.autoCheck,$e(e.autoCheck),e.hasSynonymsEnabled?De():Ce(),function(e){e?Be():Me()}(e.hasPickyModeEnabledGlobally),Fe(),ze(),fe.addEventListener(StorageControllerClass.eventNames.uiStateChanged,(e=>{e.hasPaidSubscription&&e.hasPaidSubscription.newValue&&be()}))})),fe.onReady((()=>{fe.startChangelogCoupon();const e=fe.getActiveCoupon();e&&(window.clearInterval(et),et=window.setInterval((()=>{u.querySelector("#lt-options-dicount-percent").textContent=i18nManager.getMessage("upgradeTeaserDiscount",[e.percent]),u.querySelector("#lt-options-discount-expires").textContent=` – ${i18nManager.getMessage("changelogDiscountExpires")} ${getCountdown(e.expires||0)}`,u.classList.add("lt-options__discount--visible")}),1e3))})),Dictionary.init(fe),Tracker.trackPageView(),a.addEventListener("click",(e=>{e.preventDefault(),function(){const e=document.getElementById("login-success"),t=document.getElementById("login-error");fe.updateSettings({username:"",password:"",userId:null,token:"",isDictionarySynced:!1}).then((()=>{Tracker.trackEvent("Action","logout"),e.style.display="block",translateElement(e,"settingsLogoutSuccess")})).catch((()=>{t.style.display="block",translateElement(t,"settingsUnknownError")})).then((()=>{fe.checkForPaidSubscription().then(be),browser.runtime.sendMessage({command:"LOGOUT"})}))}()})),s.addEventListener("click",(e=>{e.preventDefault(),window.open("https://languagetool.org/editor/settings/account","_blank")})),r.addEventListener("click",(e=>{e.preventDefault(),function(){const{loginUrl:e}=fe.getManagedSettings();goToManagedLogin(e,((e,t)=>(fe.updatePrivacySettings({allowRemoteCheck:!0}),fe.updateSettings({username:e,password:"",token:t,knownEmail:e}).then((()=>(ke(),fe.checkForPaidSubscription()))).then((()=>{be(),browser.runtime.sendMessage({command:"START_DICTIONARY_SYNC"}),browser.runtime.sendMessage({command:"LOGIN"})})))))}()})),g.addEventListener("click",(e=>{e.preventDefault(),fe.updateSettings({username:"",password:"",userId:null,token:"",isDictionarySynced:!1}).then((()=>{ke(),fe.checkForPaidSubscription().then(be),browser.runtime.sendMessage({command:"LOGOUT"})}))})),i.addEventListener("click",(e=>{e.preventDefault(),function(){const e=config.CLIENT_LOGIN_URL,t=document.getElementById("login-error"),n=document.getElementById("login-success");goToLogin(e,((e,o)=>(fe.updatePrivacySettings({allowRemoteCheck:!0}),fe.updateSettings({username:e,password:"",token:o,knownEmail:e,apiServerUrl:config.MAIN_SERVER_URL}).then((()=>(Tracker.trackEvent("Action","login",e),n.style.display="block",translateElement(n,"settingsLoginSuccess"),ke(),fe.checkForPaidSubscription()))).then((()=>{be(),EnvironmentAdapter.startDictionarySync()})).catch((()=>{Tracker.trackEvent("Action","login_error",e),t.style.display="block",translateElement(t,"settingsLoginError")})).then((()=>{browser.runtime.sendMessage({command:"LOGIN"})})))))}()})),m.addEventListener("click",(()=>{m.classList.contains("lt-toggle--checked")?(Ce(),Tracker.trackEvent("Action","disable_synonyms",LanguageManager.getUserLanguageCodes()[0])):(De(),Tracker.trackEvent("Action","enable_synonyms",LanguageManager.getUserLanguageCodes()[0]))})),p.addEventListener("click",(()=>{p.classList.contains("lt-toggle--checked")?(Me(),Tracker.trackEvent("Action","disable_picky_mode",LanguageManager.getUserLanguageCodes()[0])):(Be(),Tracker.trackEvent("Action","enable_picky_mode",LanguageManager.getUserLanguageCodes()[0]))})),y.addEventListener("change",(function(e){const t=y.value;fe.updateSettings({openCardHotkey:t}),e.isTrusted&&Tracker.trackEvent("Action","set_shortcut",BrowserDetector.getOS()+":"+(t||"off"))})),"Windows"===BrowserDetector.getOS()&&(null===(e=y.querySelector("[value='Alt']"))||void 0===e||e.remove()),E.addEventListener("click",(()=>{h.classList.toggle("lt-toggle-box--visible"),E.classList.toggle("lt-options-toggle--visible")&&v.focus()})),v.addEventListener("keydown",(e=>{"Enter"===e.key&&Te()})),v.addEventListener("input",(()=>{setTimeout(we,0)})),v.addEventListener("paste",(function(e){if(v.value)return;if(!e.clipboardData)return;const t=e.clipboardData.getData("text/plain");if(!t)return;const n=t.split(/\s+/);n.length<=1||(e.preventDefault(),Dictionary.addBatch(n).then((()=>Ae())))})),b.addEventListener("click",Te),k.addEventListener("click",(function(){confirm(i18nManager.getMessage("settingsAreYouSure"))&&Dictionary.clear().then((()=>Ae([],!0)))})),L.addEventListener("click",(function(){const e=Dictionary.getSorted(),t=document.createElement("textarea");t.value=e.join("\n"),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t);const n=document.getElementById("personalDictionary-options__copyMessage");n.style.display="block",wait(3e3).then((()=>fadeOut(n,(()=>{n.style.display="none",n.style.opacity="1"}))))})),S.addEventListener("click",(()=>{S.classList.toggle("lt-options-toggle--visible"),_.classList.toggle("lt-toggle-box--visible")})),D.addEventListener("click",(function(){fe.updateSettings({ignoredRules:[]}).then(Oe)})),BrowserDetector.isThunderbird()?(C.hidden=!0,document.body.setAttribute("data-is-thunderbird","true")):C.addEventListener("click",(()=>{B.classList.toggle("lt-toggle-box--visible"),C.classList.toggle("lt-options-toggle--visible")&&A.focus()})),A.addEventListener("keydown",(e=>{"Enter"===e.key&&Pe()})),A.addEventListener("input",(()=>{setTimeout(Ue,0)})),A.addEventListener("paste",(function(e){if(A.value)return;if(!e.clipboardData)return;const t=e.clipboardData.getData("text/plain");if(!t)return;const n=t.split(/\s+/);if(n.length<=1)return;e.preventDefault();const o=fe.getSettings().disabledDomains;n.forEach((e=>{const t=getDomain(e,"");t.trim()&&ve(e)&&!o.includes(t)&&o.push(t)})),fe.updateSettings({disabledDomains:o}).then(Ue)})),w.addEventListener("click",Pe),T.addEventListener("click",(function(){confirm(i18nManager.getMessage("settingsAreYouSure"))&&fe.updateSettings({disabledDomains:[]}).then((()=>Ne([],!0)))})),x.addEventListener("click",(()=>{x.classList.toggle("lt-options-toggle--visible"),O.classList.toggle("lt-toggle-box--visible")})),P.addEventListener("click",(e=>{P.classList.toggle("lt-options-toggle--visible"),V.classList.toggle("lt-toggle-box--visible")})),$.addEventListener("click",He),F.addEventListener("click",He),Y.addEventListener("click",He),j.addEventListener("click",(e=>{e.preventDefault(),qe()})),H.addEventListener("submit",(e=>{e.preventDefault(),function(){let e="";e=$.checked?config.MAIN_SERVER_URL:F.checked?config.LOCAL_SERVER_URL:z.value.trim();const t=document.getElementById("serverUrl-success"),n=document.getElementById("serverUrl-error");fe.updateSettings({apiServerUrl:e}).then((()=>{fe.checkForPaidSubscription().then((()=>{be()})),t.style.display="block",wait(3e3).then((()=>fadeOut(t,(()=>{t.style.display="none",t.style.opacity="1"}))))})).catch((()=>{n.style.display="block",wait(3e3).then((()=>fadeOut(n,(()=>{n.style.display="none",n.style.opacity="1"}))))}))}()})),J.addEventListener("change",(function(){fe.updateSettings({motherTongue:J.value})})),K.addEventListener("change",(function(){fe.updateSettings({enVariant:K.value})})),Q.addEventListener("change",(function(){fe.updateSettings({deVariant:Q.value})})),X.addEventListener("change",(function(){fe.updateSettings({ptVariant:X.value})})),Z.addEventListener("change",(function(){fe.updateSettings({caVariant:Z.value})})),ee.addEventListener("input",(()=>{fe.updateSettings({autoCheck:ee.checked}),$e(ee.checked)})),oe.addEventListener("keydown",(e=>{"Enter"===e.key&&We()})),oe.addEventListener("input",(()=>{setTimeout(Ye,0)})),oe.addEventListener("paste",(function(e){if(oe.value)return;if(!e.clipboardData)return;const t=e.clipboardData.getData("text/plain");if(!t)return;const n=t.split(/\s+/);if(n.length<=1)return;e.preventDefault();const o=fe.getSettings().autoCheckOnDomains;n.forEach((e=>{const t=getDomain(e,"");t.trim()&&ve(e)&&!o.includes(t)&&o.push(t)})),fe.updateSettings({autoCheckOnDomains:o}).then(Ye)})),ae.addEventListener("click",We),se.addEventListener("click",(function(){confirm(i18nManager.getMessage("settingsAreYouSure"))&&fe.updateSettings({autoCheckOnDomains:[]}).then((()=>Fe([],!0)))})),de.addEventListener("keydown",(e=>{"Enter"===e.key&&Ke()})),de.addEventListener("input",(()=>{setTimeout(Je,0)})),de.addEventListener("paste",(function(e){if(de.value)return;if(!e.clipboardData)return;const t=e.clipboardData.getData("text/plain");if(!t)return;const n=t.split(/\s+/);if(n.length<=1)return;e.preventDefault();const o=fe.getSettings().ignoreCheckOnDomains;n.forEach((e=>{const t=getDomain(e);t.trim()&&ve(e)&&!o.includes(t)&&o.push(t)})),fe.updateSettings({ignoreCheckOnDomains:o}).then(Je)})),ce.addEventListener("click",Ke),re.addEventListener("click",(function(){confirm(i18nManager.getMessage("settingsAreYouSure"))&&fe.updateSettings({ignoreCheckOnDomains:[]}).then((()=>ze([],!0)))})),me.textContent=(new Date).getFullYear().toString(),BrowserDetector.isSafari()&&ge instanceof HTMLAnchorElement&&(ge.href+=ge.href.includes("?")?"&hidePremium=true":"?hidePremium=true"),fe.onReady((()=>{const e=document.querySelector("#heart");if(e){const{showRuleId:t}=fe.getUIState();let n=0;e.style.cursor="default",e.style.userSelect="none",t&&(e.style.color="blue"),e.addEventListener("click",(o=>{4==++n&&(t?(e.style.color="",fe.updateUIState({showRuleId:!1})):(e.style.color="blue",fe.updateUIState({showRuleId:!0}))),o.preventDefault()}))}}))}();