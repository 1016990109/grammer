class UndoNotification{constructor({language:t,label:e,description:i,parentElement:n,lifetime:s,onUndo:o=(()=>{})}){this.TRANSITION_DURATION=250,this._hideTimeout=null,this._unscheduleHiding=()=>{"number"==typeof this._hideTimeout&&(window.clearTimeout(this._hideTimeout),this._hideTimeout=null)},this._rescheduleHiding=()=>{null===this._hideTimeout&&this._scheduleHiding()},this._handleMousedown=t=>t.preventDefault(),this._handleClick=()=>{this._document.execCommand("undo",!1),this._hide(),this._onUndo()},this._handleKeydown=t=>{"z"===t.key&&t.getModifierState(this._getModifierKeyName())&&this._hide()},this._parentElement=n,this._language=t,this._label=e,this._description=i,this._lifetime=s,this._onUndo=o,this._document=n.ownerDocument}static create(t){return UndoNotification._instance&&UndoNotification._instance._remove(),UndoNotification._instance=new UndoNotification(t),UndoNotification._instance._render(),UndoNotification._instance}show(){requestAnimationFrame((()=>{var t;null===(t=this._element)||void 0===t||t.classList.add("lt-undo-notification--visible")})),this._scheduleHiding()}_render(){this._element=this._document.createElement("lt-notification"),this._element.classList.add("lt-undo-notification"),this._element.style.setProperty("--transition-duration",`${this.TRANSITION_DURATION}ms`),this._element.dataset.testid="undo";const t=this._document.createElement("lt-span");t.classList.add("lt-undo-notification__content");const e=this._document.createElement("lt-span");e.classList.add("lt-undo-notification__label"),e.textContent=this._label;const i=this._getLocalizedCommand(this._language),n=this._document.createElement("lt-span");n.classList.add("lt-undo-notification__description"),n.innerHTML=this._description.replace("%{cmd}",`<lt-span class="lt-undo-notification__description__cmd">${i}</lt-span>`),this._button=this._document.createElement("lt-span"),this._button.classList.add("lt-undo-notification__button"),this._button.addEventListener("click",this._handleClick),this._button.addEventListener("mousedown",this._handleMousedown),this._button.dataset.testid="undo-button",t.appendChild(e),t.appendChild(n),this._element.appendChild(t),this._element.appendChild(this._button),this._element.addEventListener("mouseover",this._unscheduleHiding),this._element.addEventListener("mouseout",this._rescheduleHiding),this._parentElement.appendChild(this._element),this._document.addEventListener("keydown",this._handleKeydown)}_remove(){this._element&&this._button&&(this._button.removeEventListener("click",this._handleClick),this._button.removeEventListener("mousedown",this._handleMousedown),this._element.removeEventListener("mouseover",this._unscheduleHiding),this._element.removeEventListener("mouseout",this._rescheduleHiding),this._document.removeEventListener("keydown",this._handleKeydown),this._parentElement.removeChild(this._element),this._element=void 0)}_scheduleHiding(){var t;this._hideTimeout=window.setTimeout(this._hide.bind(this),this.TRANSITION_DURATION+(null!==(t=this._lifetime)&&void 0!==t?t:0))}_hide(){var t,e;null===(t=this._element)||void 0===t||t.classList.remove("lt-undo-notification--visible"),null===(e=this._element)||void 0===e||e.classList.add("lt-undo-notification--hiding"),setTimeout((()=>this._remove()),this.TRANSITION_DURATION)}_getLocalizedCommand(t){let e=t.startsWith("de")?"Strg":"Ctrl";return e="Mac"===BrowserDetector.getOS()?"âŒ˜":e,`${e} + Z`}_getModifierKeyName(){return"Mac"===BrowserDetector.getOS()?"Meta":"Control"}}UndoNotification._instance=null;